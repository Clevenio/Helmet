# Helmet API Definition

[Main]
    id = "spacewalk_helmet"
    name = "SpaceWalk - Helmet"
    description = "A Lightweight Cloud Native API Gateway"
    timeout = "30s"
    service_url = "{$serviceURL:http://127.0.0.1:8000}"
    # These headers will be applied to all endpoints http calls
    headers = [ ["Content-Type", "application/json"] ]

[Security]
    # Supported Types are basic, bearer and api_key and none
    scheme = "api_key"

    [Security.Basic]
        username = "{$authUsername:default}"
        password = "{$authPassword:default}"
        header = ["Authorization", "Basic base64(username:password)"]

    [Security.ApiKey]
        header = ["X-API-KEY", "{$authApiKey:6c68b836-6f8e-465e-b59f-89c1db53afca}"]

[[Endpoint]]
    id = "GetSystemHealth"
    name = "Get system health"
    description = ""
    method = "get"
    public = true
    headers = []
    parameters = []
    uri = "/_health"
    body = ""

[[Endpoint]]
    id = "GetSystemReadiness"
    name = "Get system readiness"
    description = ""
    method = "get"
    public = true
    headers = []
    parameters = []
    uri = "/_ready"
    body = ""

[[Endpoint]]
    id = "GetEndpoints"
    name = "Get Endpoints"
    description = ""
    method = "get"
    public = false
    headers = []
    parameters = []
    uri = "/_api/v1/endpoint"
    body = ""

[[Endpoint]]
    id = "GetAuthMethods"
    name = "Get Auth Methods"
    description = ""
    method = "get"
    public = false
    headers = []
    parameters = []
    uri = "/_api/v1/auth/method"
    body = ""

[[Endpoint]]
    id = "CreateAuthMethod"
    name = "Create Auth Method"
    description = ""
    method = "post"
    public = false
    headers = []
    parameters = []
    uri = "/_api/v1/auth/method"
    body = """
    {
        "name": "{$name:customers_public}",
        "type": "{$type:key_authentication}",
        "description": "{$description}",
        "endpoints": "{$endpoints:order_service}"
    }
    """

[[Endpoint]]
    id = "GetAuthMethod"
    name = "Get Auth Method"
    description = ""
    method = "get"
    public = false
    headers = []
    parameters = []
    uri = "/_api/v1/auth/method/{$id}"
    body = ""


[[Endpoint]]
    id = "UpdateAuthMethod"
    name = "Update Auth Method"
    description = ""
    method = "put"
    public = false
    headers = []
    parameters = []
    uri = "/_api/v1/auth/method/{$id}"
    body = """
    {
        "name": "{$name:customers_public}",
        "type": "{$type:key_authentication}",
        "description": "{$description}",
        "endpoints": "{$endpoints:order_service}"
    }
    """

[[Endpoint]]
    id = "DeleteAuthMethod"
    name = "Delete Auth Method"
    description = ""
    method = "delete"
    public = false
    headers = []
    parameters = []
    uri = "/_api/v1/auth/method/{$id}"
    body = ""

